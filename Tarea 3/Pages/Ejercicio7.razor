@page "/Ejercicio7"
@inject HttpClient http

<style>
    img {
        width: 80%;
        padding: 60px;
    }

    .hidden {
        opacity: 0;
        display: none;
    }

    .search-container {
        display: flex;
        margin: 10px;
        width: 80%;
    }

    input:focus {
        border: 1px solid #22CBA8;
        box-shadow: none !important;
    }

    .btn-search {
        border: none;
        padding-bottom: 10px 25px;
        border-radius: 0 5px 5px 0;
        background-color: #ff6a00;
        color: #fff;
        margin-left: -15px;
        cursor: pointer;
    }

    .no-border {
        border: none !important;
    }

    .flex-center {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 30px 15px;
        background-color: #efefef;
        color: #406163;
    }

    .pokemon-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        /* padding: 60px 15px; */
    }

    .cp-text span {
        font-size: 16px;
    }

    .img-container {
        position: relative;
        z-index: 2;
        border-radius: 50%;
        text-align: center;
    }


    .detail-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 100px 30px 60px;
        border-radius: 10px;
        background-color: #fff;
        width: 100%;
        margin-top: -150px;
        box-shadow: 0 0 8px rgba(0,0,0,0.3);
    }

    .seperator {
        border-color: #ff6a00 !important;
        border-width: 10px;
        border-radius: 5px;
    }

    .btn-transfer {
        margin: 45px 0;
        padding: 15px 30px;
        background: linear-gradient(to right, #9EDA93, #22CBA8);
        border-radius: 25px;
        border: none;
        color: #fff;
        min-width: 60%;
    }

    .stats span.first {
        border-right: 1px solid #eee
    }

    .attributes-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        text-align: center;
        width: 100%;
        text-transform: capitalize;
    }

    .cp-text {
        padding-right: 10px;
        border-right: 1px solid #eee;
        margin: 0;
    }

        .cp-text:last-child {
            border: none;
        }

    .player-data {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        margin-top: 15px;
        border-top: 1px solid #eee;
        padding-top: 15px;
        text-align: center;
    }

    .data-container p {
        margin-bottom: 0;
    }

    #update_name, #update_candy_title {
        text-transform: capitalize;
    }
</style>

<div class="container flex-center">
    <h2>Google-Dex</h2>
    <small class="text-muted">El Google de los Pokemones</small>
    <div class="search-container col-md-5 col-sm-5">
        <input @bind-value="buscar" type="text" class="form-control" id="search_q" placeholder="Coloca el # o nombre de tu Pokemon">
        <button @onclick="getPokemon" class="btn-search" id="search-btn">
            <i class="oi oi-magnifying-glass" aria-hidden="true"></i>
        </button>
    </div>
    <div id="show_error" class="hidden alert alert-danger alert-dismissible fade" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            <span class="sr-only">Close</span>
        </button>
        <strong>How weird!</strong> We don't know that pokemon :(
    </div>
    <div style="visibility:@visi" class="col-md-5 col-sm-5 pokemon-card" id="pokemon_details">
        <div class="img-container">
            <img id="update_img" src="@imagen" alt="" srcset="">
        </div>
        <div class="detail-container">
            <div class="title-container">
                <h3 class="name text-center" id="update_name">@name</h3>
                <hr class="seperator">
                <div class="stats text-center">
                    <span class="first cp-text col-md-6" id="update_hp">HP 32/32</span>
                    <span class="cp-text col-md-6" id="update_cp">XP @xp</span>
                </div>
            </div>
            <br />
            <div class="attributes-container">
                <div class="col attributes-content" style="min-width: 42%;">
                    <p class="cp-text" id="update_type">@tipo</p>
                    <small class="text-muted">Tipo</small>
                </div>
                <div class="col attributes-content">
                    <p class="cp-text" id="update_weight">@ancho kg</p>
                    <small class="text-muted">Ancho</small>
                </div>
                <div class="col attributes-content">
                    <p class="cp-text no-border" id="update_height">@alto m</p>
                    <small class="text-muted">Alto</small>
                </div>
            </div>
            <div class="player-data">
                <div class="col data-container">
                    <p class="stardust" id="update_stardust">@habilidad</p>
                    <p class="muted-text">Habilidad</p>
                </div>
                <div class="col data-container">
                    <p class="stardust" id="update_candy">@movimiento</p>
                    <p class="muted-text" id="update_candy_title">Movimiento</p>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    string buscar = "";
    string name = "";
    string imagen = "";
    int id = 0;
    string tipo = "";
    string ancho = "";
    string alto = "";
    string xp = "";
    string habilidad = "";
    string movimiento = "";
    string visi = "hidden";
    private async Task getPokemon()
    {
        var url = $"https://pokeapi.co/api/v2/pokemon/{buscar}";
        var data = await http.GetJsonAsync<Datosp>(url);
        name = data.name;
        tipo = data.types[0].type.name;
        ancho = data.weight.ToString();
        alto = data.height.ToString();
        imagen = $"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/{data.id}.png";
        xp = data.base_experience.ToString();
        habilidad = data.abilities[1].ability.name;
        movimiento = data.moves[0].move.name;
        id = data.id;
        visi = "visible";


    }
    private void ocultar()
    {
        visi = "hidden";
    }
}

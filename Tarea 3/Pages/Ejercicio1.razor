@page "/Ejercicio1"


<div class="card">
    <div class="card-header">
        Consulta de Cedula (VALIDACION)
    </div>
    <div class="card-body">
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Introduzca su Cedula (sin guiones)</label>
            <input @bind-value="@cedula" type="email" class="form-control" id="exampleFormControlInput1">
        </div>
        <button @onclick="obtenerDatos" type="button" class="btn btn-primary">Realizar consulta</button>
        <button @onclick="nuevo" type="button" class="btn btn-warning">Nueva consulta</button>
    </div>
</div>
<br />
<div class="card" style="width: 18rem; margin-left:30%; visibility:@visible;">
    <img src="@imagen" class="card-img-top" height="200">
    <div class="card-body">
        <h5 class="card-title">@nombre</h5>
    </div>
    <ul class="list-group list-group-flush">
        <li class="list-group-item">@apellido</li>
        <li class="list-group-item">@fecha</li>
        <li class="list-group-item">@z_s</li>
    </ul>
</div>

@code {

    CE1 Conapi = new CE1();
    string visible = "hidden";
    string cedula = "";
    string nombre = "", apellido = "", fecha = "";
    string z_s = "";
    string imagen = "";


    public void obtenerDatos()
    {
        {
            var datos = Conapi.traerDato(cedula);
            nombre = datos.Nombres;
            apellido = $"{datos.Apellido1}  {datos.Apellido2}";
            imagen = datos.foto;
            fecha = Convert.ToDateTime(datos.FechaNacimiento).ToString("dd/MM/yyyy");
            int dia = int.Parse(Convert.ToDateTime(datos.FechaNacimiento).ToString("dd"));
            var mes = int.Parse(Convert.ToDateTime(datos.FechaNacimiento).ToString("MM"));
            z_s = signo(dia, mes);
            visible = "visible";
        }


    }

    public void nuevo()
    {
        visible = "hidden";
        cedula = "";
    }

    public string signo(int dia, int mes)
    {
        if ((dia >= 21 && mes == 3) || (dia <= 20 && mes == 4))
            return "Aries";
        if ((dia >= 24 && mes == 9) || (dia <= 23 && mes == 10))
            return "Libra";
        if ((dia >= 21 && mes == 4) || (dia <= 21 && mes == 5))
            return "Tauro";
        if ((dia >= 24 && mes == 10) || (dia <= 22 && mes == 11))
            return "Escorpio";
        if ((dia >= 22 && mes == 5) || (dia <= 21 && mes == 6))
            return "Géminis";
        if ((dia >= 23 && mes == 11) || (dia <= 21 && mes == 12))
            return "Sagitario";
        if ((dia >= 21 && mes == 6) || (dia <= 23 && mes == 7))
            return "Cáncer";
        if ((dia >= 22 && mes == 12) || (dia <= 20 && mes == 1))
            return "Capricornio";
        if ((dia >= 24 && mes == 7) || (dia <= 23 && mes == 8))
            return "Leo";
        if ((dia >= 21 && mes == 1) || (dia <= 19 && mes == 2))
            return "Acuario";
        if ((dia >= 24 && mes == 8) || (dia <= 23 && mes == 9))
            return "Virgo";
        if ((dia >= 20 && mes == 2) || (dia <= 20 && mes == 3))
            return "Piscis";
        return "";
    }
}
